"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function StorageModel(){this.access_token="",this.user_id="",this.rol="",this.user=""}var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}();angular.module("dance",["ui.router","ui.select2","my-components","my-services","my-pipes","my-directives","my-filters","pages"]).run(["$state",function(t){""==location.hash&&t.go("users.home")}]),angular.module("dance").config(function(t,e,s,n){e.hashPrefix("!"),s.otherwise("not_found")}),angular.module("dance").constant("config",{api_url:location.origin+location.pathname+"api",debug:!0});var stateTree=function t(e,s,n){void 0!=s&&0!=s.length&&s.forEach(function(s){var o=e+(""===e?"":".")+s.name;n.state(o,s),t(o,s.childrens,n)})},toTitleBar=function(t){return t.length<=10?t:t.substr(0,7)+"..."};angular.module("my-components",[]),angular.module("my-directives",[]),angular.module("my-filters",[]),angular.module("pages",["not_logged","logged"]),angular.module("my-pipes",[]),angular.module("my-services",[]),angular.module("logged",["titles","dancestyles","countries","companies","persons","works","schools","venues"]).config(function(t,e){e.config.strictMode(!1),t.state("changePassword",{url:"/change_password",component:"changePasswordPage"}),t.state("users",{url:"/users",component:"usersTemplate",onEnter:function(t,e){e.isLogged()||t.go("login")}}),t.state("users.home",{url:"/home",component:"homePage"})}),angular.module("not_logged",[]).config(function(t,e){e.config.strictMode(!1),t.state("login",{url:"/login",component:"loginPage"}),t.state("not_found",{url:"/not_found",component:"notFoundPage"})}),angular.module("companies",[]).config(function(t,e){e.config.strictMode(!1),t.state("users.companies",{url:"/companies",component:"companiesListPage"}),t.state("users.companiesAdd",{url:"/companies/add",component:"companiesFormPage"}),t.state("users.companiesEdit",{url:"/companies/edit/:id",component:"companiesFormPage"}),t.state("users.companiesDetails",{url:"/companies/details/:id",component:"companiesDetailsPage"})}),angular.module("countries",["cities"]).config(function(t,e){e.config.strictMode(!1),t.state("users.countries",{url:"/countries",component:"countriesListPage"}),t.state("users.countriesAdd",{url:"/countries/add",component:"countriesFormPage"}),t.state("users.countriesEdit",{url:"/countries/edit/:id",component:"countriesFormPage"}),t.state("users.countriesDetails",{url:"/countries/details/:id",component:"countriesDetailsPage"})}),angular.module("dancestyles",[]).config(function(t,e){e.config.strictMode(!1),t.state("users.dancestyles",{url:"/dancestyles",component:"dancestylesListPage"}),t.state("users.dancestylesAdd",{url:"/dancestyles/add",component:"dancestylesFormPage"}),t.state("users.dancestylesEdit",{url:"/dancestyles/edit/:id",component:"dancestylesFormPage"}),t.state("users.dancestylesDetails",{url:"/dancestyles/details/:id",component:"dancestylesDetailsPage"})}),angular.module("persons",[]).config(function(t,e){e.config.strictMode(!1),t.state("users.persons",{url:"/persons",component:"personsListPage"}),t.state("users.personsAdd",{url:"/persons/add",component:"personsFormPage"}),t.state("users.personsEdit",{url:"/persons/edit/:id",component:"personsFormPage"}),t.state("users.personsDetails",{url:"/persons/details/:id",component:"personsDetailsPage"})}),angular.module("schools",[]).config(function(t,e){e.config.strictMode(!1),t.state("users.schools",{url:"/schools",component:"schoolsListPage"}),t.state("users.schoolsAdd",{url:"/schools/add",component:"schoolsFormPage"}),t.state("users.schoolsEdit",{url:"/schools/edit/:id",component:"schoolsFormPage"}),t.state("users.schoolsDetails",{url:"/schools/details/:id",component:"schoolsDetailsPage"})}),angular.module("titles",[]).config(function(t,e){e.config.strictMode(!1),t.state("users.titles",{url:"/titles",component:"titlesListPage"}),t.state("users.titlesAdd",{url:"/titles/add",component:"titlesFormPage"}),t.state("users.titlesEdit",{url:"/titles/edit/:id",component:"titlesFormPage"}),t.state("users.titlesDetails",{url:"/titles/details/:id",component:"titlesDetailsPage"})}),angular.module("venues",[]).config(function(t,e){e.config.strictMode(!1),t.state("users.venues",{url:"/venues",component:"venuesListPage"}),t.state("users.venuesAdd",{url:"/venues/add",component:"venuesFormPage"}),t.state("users.venuesEdit",{url:"/venues/edit/:id",component:"venuesFormPage"}),t.state("users.venuesDetails",{url:"/venues/details/:id",component:"venuesDetailsPage"})}),angular.module("works",[]).config(function(t,e){e.config.strictMode(!1),t.state("users.works",{url:"/works",component:"worksListPage"}),t.state("users.worksAdd",{url:"/works/add",component:"worksFormPage"}),t.state("users.worksEdit",{url:"/works/edit/:id",component:"worksFormPage"}),t.state("users.worksDetails",{url:"/works/details/:id",component:"worksDetailsPage"})}),angular.module("cities",[]).config(function(t,e){e.config.strictMode(!1),t.state("users.cities",{url:"/countries/:country_id/cities",component:"citiesListPage",params:{country_id:""}}),t.state("users.citiesAdd",{url:"/countries/:country_id/cities/add",component:"citiesFormPage"}),t.state("users.citiesEdit",{url:"/countries/:country_id/cities/edit/:id",component:"citiesFormPage"}),t.state("users.citiesDetails",{url:"/countries/:country_id/cities/details/:id",component:"citiesDetailsPage"})});var CrudClass=function(){function t(e,s){_classCallCheck(this,t),this._http=e,this.url=s,"/"!=this.url[this.url.length-1]&&(this.url+="/")}return _createClass(t,[{key:"list",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._http.get(this.url+t).then(function(t){return t})}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._http.get(this.url+t+e).then(function(t){return t})}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._http.post(this.url+e,t).then(function(t){return t})}},{key:"edit",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this._http.put(this.url+t+s,e).then(function(t){return t})}},{key:"remove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._http["delete"](this.url+t+e).then(function(t){return t})}}]),t}();angular.module("my-filters").filter("city",function(){return function(t){return t?t.name+", "+t._country.name:""}}),angular.module("my-filters").filter("gender",function(){return function(t){var e=[];return e.M="Male",e.F="Famele",e[t]}}),angular.module("my-services").service("debugService",function(t){this.log=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.debug&&console.log(e,s)}}),angular.module("my-services").service("myHttpService",function(t,e,s,n,o){return new(function(){function i(){var t=this;_classCallCheck(this,i),this.config={headers:{"Content-Type":"application/json; charset=utf-8"}},this.checkAccessToken(),e.scope.$on("storageChange",function(e){t.checkAccessToken()})}return _createClass(i,[{key:"upload",value:function(e,n){var i=new FormData;angular.forEach(n,function(t,e){i.append(e,t)}),s.log("Request to: "+e+" Method: post"),s.log("Data: ",n);var a={};return angular.copy(this.config.headers,a),a["Content-Type"]=void 0,t.post(e,i,{transformRequest:angular.identity,headers:a}).then(function(t){return s.log("Response from: "+e+" Method: post"),s.log("Response: ",t),t.data},function(t){s.log("Errors from: "+_url+" Method: post "),s.log("Errors: ",t),o.error("Error","There is not connection with the server")})}},{key:"checkAccessToken",value:function(){e.isLogged()?this.config.headers.Authorization="Bearer "+e.storage.access_token:delete this.config.headers.Authorization}},{key:"get",value:function(e){var i=n.api_url+e;return s.log("Request to: "+i+" Method: get"),t.get(i,this.config).then(function(t){return s.log("Response from: "+i+" Method: get "),s.log("Response: ",t.data),t.data},function(t){s.log("Errors from: "+i+" Method: get "),s.log("Errors: ",t),o.error("Error","There is not connection with the server")})}},{key:"post",value:function(e,i){var a=n.api_url+e;return s.log("Request to: "+a+" Method: post "),s.log("Data: ",i),t.post(a,i,this.config).then(function(t){return s.log("Response from: "+a+" Method: post "),s.log("Data: ",i),s.log("Response: ",t.data),t.data},function(t){s.log("Response from: "+a+" Method: post "),s.log("Data: ",i),o.error("Error","There is not connection with the server")})}},{key:"put",value:function(e,i){var a=n.api_url+e;return s.log("Request to: "+a+" Method: put "),s.log("Data: ",i),t.put(a,i,this.config).then(function(t){return s.log("Response from: "+a+" Method: put "),s.log("Data: ",i),s.log("Response: ",t.data),t.data},function(t){s.log("Response from: "+a+" Method: put "),s.log("Data: ",i),o.error("Error","There is not connection with the server")})}},{key:"delete",value:function(e){var i=n.api_url+e;return s.log("Request to: "+i+" Method: delete "),t["delete"](i,this.config).then(function(t){return s.log("Response from: "+i+" Method: delete "),s.log("Response: ",t.data),t.data},function(t){s.log("Errors from: "+i+" Method: delete "),s.log("Errors: ",t),o.error("Error","There is not connection with the server")})}}]),i}())}),angular.module("my-services").service("notyService",function(){function t(){_classCallCheck(this,t),this.warning=function(t,e){$.gritter.add({title:t,text:e,class_name:"gritter-warning gritter-light",time:2e3})},this.info=function(t,e){$.gritter.add({title:t,text:e,class_name:"gritter-info gritter-light",time:2e3})},this.success=function(t,e){$.gritter.add({title:t,text:e,class_name:"gritter-success gritter-light",time:2e3})},this.error=function(t,e){$.gritter.add({title:t,text:e,class_name:"gritter-error gritter-light",time:2e3})}}return t}()),angular.module("my-services").service("citiesApiService",function(t){return new(function(e){function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,"/cities"))}return _inherits(s,e),s}(CrudClass))}),angular.module("my-services").service("companiesApiService",function(t){return new(function(e){function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,"/companies"))}return _inherits(s,e),s}(CrudClass))}),angular.module("my-services").service("countriesApiService",function(t){return new(function(e){function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,"/countries"))}return _inherits(s,e),s}(CrudClass))}),angular.module("my-services").service("dancestylesApiService",function(t){return new(function(e){function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,"/dancestyles"))}return _inherits(s,e),s}(CrudClass))}),angular.module("my-services").service("personsApiService",function(t){return new(function(e){function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,"/persons"))}return _inherits(s,e),s}(CrudClass))}),angular.module("my-services").service("schoolsApiService",function(t){return new(function(e){function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,"/schools"))}return _inherits(s,e),s}(CrudClass))}),angular.module("my-services").service("titlesApiService",function(t){return new(function(e){function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,"/titles"))}return _inherits(s,e),s}(CrudClass))}),angular.module("my-services").service("uploadService",function(t,e){return new(function(){function s(){_classCallCheck(this,s)}return _createClass(s,[{key:"upload",value:function(s){return t.upload(e.api_url+"/upload",{file:s}).then(function(t){return t})}}]),s}())}),angular.module("my-services").service("venuesApiService",function(t){return new(function(e){function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,"/venues"))}return _inherits(s,e),s}(CrudClass))}),angular.module("my-services").service("worksApiService",function(t){return new(function(e){function s(){return _classCallCheck(this,s),_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,"/works"))}return _inherits(s,e),s}(CrudClass))}),angular.module("my-services").service("authService",function(t,e,s,n){return new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"login",value:function(e,s){return t.post("/auth/login",{user:e,pass:s}).then(function(t){return t})}},{key:"change_password",value:function(e){return t.post("/changepassword",e).then(function(t){return t})}}]),e}())}),angular.module("my-services").service("loginStatusService",function(t){return new(function(){function e(){_classCallCheck(this,e),this.storage_key="danceapp_02869264ksjdi234nkw",this.storage=new StorageModel,this.scope=t.$new(!0),this.load(),this.emitChange()}return _createClass(e,[{key:"emitChange",value:function(){this.scope.$emit("storageChange",this.storage)}},{key:"isLogged",value:function(){return""!=this.storage.access_token}},{key:"isAdmin",value:function(){return this.isLogged()&&"admin"===this.storage.rol}},{key:"setStorage",value:function(t){this.storage=t,this.save(),this.emitChange()}},{key:"remove",value:function(){localStorage.removeItem(this.storage_key),this.storage=new StorageModel,this.emitChange()}},{key:"save",value:function(){localStorage.setItem(this.storage_key,JSON.stringify(this.storage))}},{key:"load",value:function(){var t=JSON.parse(localStorage.getItem(this.storage_key));return null==t?(this.remove(),!1):void this.setStorage(t)}}]),e}())}),angular.module("my-services").service("titleBarService",function(){function t(e){_classCallCheck(this,t),this.scope=e.$new(!0),this.title="titulo",this.description="descripción",this.path=[],this.emitChange()}return _createClass(t,[{key:"emitChange",value:function(){this.scope.$emit("dataChange",{title:this.title,description:this.description,path:this.path})}},{key:"setTitle",value:function(t){this.title=t,this.emitChange()}},{key:"setDescription",value:function(t){this.description=t,this.emitChange()}},{key:"setPath",value:function(t){this.path=t,this.emitChange()}},{key:"setData",value:function(t){this.title=t.title,this.description=t.description,this.path=t.path,this.emitChange()}},{key:"addPath",value:function(t){this.path.push(t),this.emitChange()}}]),t}()),angular.module("pages").component("usersTemplate",{templateUrl:"src/templates/users.template.html",controller:function e(){_classCallCheck(this,e)}}),angular.module("my-components").component("myFooter",{templateUrl:"src/components/footer/footer.component.html",controller:function(){return new(function(){function t(){_classCallCheck(this,t),this.$onInit=function(){}}return t}())}}),angular.module("my-components").component("myHeader",{templateUrl:"src/components/header/header.component.html",controller:function(t,e,s){return new(function(){function n(){_classCallCheck(this,n),this.$onInit=function(){},this.logout=function(){t.remove(),s.info("Bye","Have a nice day"),e.go("login")}}return n}())}}),angular.module("my-components").component("leftPanel",{templateUrl:"src/components/left-panel/left-panel.component.html",controller:function(){return new(function(){function t(){_classCallCheck(this,t),this.$onInit=function(){}}return t}())}}),angular.module("my-components").component("loadingData",{templateUrl:"src/components/loading-data/loading-data.component.html",bindings:{active:"<"},controller:function(){return new(function(){function t(){_classCallCheck(this,t),this.$onInit=function(){}}return t}())}}),angular.module("my-components").component("myInput",{templateUrl:"src/components/my-input/my-input.component.html",bindings:{error:"=",form:"<",label:"@",name:"@",model:"=",placeholder:"@",required:"<",type:"@"},controller:function(){return new(function(){function t(){_classCallCheck(this,t),this.$onInit=function(){}}return _createClass(t,[{key:"change",value:function(){this.error=""}}]),t}())}}),angular.module("my-components").component("myInputDate",{templateUrl:"src/components/my-input-date/my-input-date.component.html",bindings:{error:"=",form:"<",label:"@",name:"@",model:"=",required:"<"},controller:function(t,e){return new(function(){function e(){var s=this;_classCallCheck(this,e),this.$onInit=function(){var e=$(t).find("#datepicker");e.datepicker({autoclose:!0,format:"mm/dd/yyyy"}),e.change(function(){var t=new Date(e.val());s.model=t.getTime()/1e3})}}return e}())}}),angular.module("my-components").component("myInputFile",{templateUrl:"src/components/my-input-file/my-input-file.component.html",bindings:{form:"<",label:"@",name:"@",model:"=",required:"<",error:"<"},controller:function(t){return new(function(){function e(){_classCallCheck(this,e),this.$onInit=function(){}}return _createClass(e,[{key:"change",value:function(e){var s=this;e.files.length>0&&t.upload(e.files[0]).then(function(t){t&&(200==t.status?(s.model=t.data,s.error=void 0):s.error=t.errors.file)})}}]),e}())}}),angular.module("my-components").component("mySelect",{templateUrl:"src/components/my-select/my-select.component.html",bindings:{error:"=",form:"<",label:"@",name:"@",model:"=",data:"<",required:"<"},controller:function(t,e){return new(function(){function t(){_classCallCheck(this,t)}return t}())}}),angular.module("my-components").component("myShowList",{templateUrl:"src/components/my-show-list/my-show-list.component.html",bindings:{title:"@",data:"<",attr:"@"},controller:function(t){return new(function(){function t(){_classCallCheck(this,t)}return t}())}}),angular.module("my-components").component("myTabsPane",{transclude:!0,templateUrl:"src/components/my-tabs/my-tabs-pane.component.html",require:{tabsCtrl:"^myTabs"},bindings:{title:"@",selected:"<"},controller:function(){return new(function(){function t(){_classCallCheck(this,t),this.$onInit=function(){this.tabsCtrl.addPane(this),this.selected&&this.tabsCtrl.select(this)}}return t}())}}),angular.module("my-components").component("myTabs",{transclude:!0,templateUrl:"src/components/my-tabs/my-tabs.component.html",controller:function(){return new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"$onInit",value:function(){this.panes=[]}},{key:"select",value:function(t){angular.forEach(this.panes,function(t){t.selected=!1}),t.selected=!0}},{key:"addPane",value:function(t){0===this.panes.length&&this.select(t),this.panes.push(t)}}]),t}())}}),angular.module("my-components").component("myTags",{templateUrl:"src/components/my-tags/my-tags.component.html",bindings:{label:"@",model:"="},controller:function(){return new(function(){function t(){var e=this;_classCallCheck(this,t),this.$onInit=function(){void 0==e.model&&(e.model=[])},this.text=""}return _createClass(t,[{key:"blur",value:function(){""!==this.text.trim()&&this.model.push(this.text),this.text=""}},{key:"del",value:function(t){this.model.splice(t,1)}}]),t}())}}),angular.module("my-components").component("myTagsList",{templateUrl:"src/components/my-tags-list/my-tags-list.component.html",bindings:{title:"@",model:"=",canEdit:"<",canRemove:"<",onChange:"&"},controller:function(t){return new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"$onInit",value:function(){void 0==this.model&&(this.model=[]),this.action="Add",this.text=""}},{key:"handleEnter",value:function(t){var e=this;if(void 0==t||"Enter"==t.key){void 0!=t&&t.preventDefault();var s=this.text.trim();""!==s&&(this.canEdit&&"Edit"===this.action?this.model.findIndex(function(t,n){return e.editing_id!=n&&t==s})===-1&&(this.model[this.editing_id]=s,this.text="",this.action="Add"):"Add"===this.action&&this.model.findIndex(function(t){return t==s})===-1&&(this.model.push(s),this.text=""),this.onChange(this.model))}}},{key:"edit",value:function(t){this.action="Edit",this.text=this.model[t],this.editing_id=t}},{key:"remove",value:function(t){this.canRemove&&this.model.splice(t,1)}}]),t}())}}),angular.module("my-components").component("myTagsSelectList",{templateUrl:"src/components/my-tags-select-list/my-tags-select-list.component.html",bindings:{model:"=",data:"<",onChange:"&"},controller:function(t){return new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"$onInit",value:function(){void 0==this.model&&(this.model=[]),this.selected=-1}},{key:"getText",value:function(t){if(this.data){var e=this.data.findIndex(function(e){return e.id==t});if(e!=-1)return this.data[this.data.findIndex(function(e){return e.id==t})].text}return""}},{key:"add",value:function(){var t=this;this.model.findIndex(function(e){return e==t.selected})==-1&&this.selected!=-1&&(this.model.push(this.selected),this.selected=-1,this.onChange(this.model))}},{key:"remove",value:function(t){this.model.splice(t,1)}}]),t}())}}),angular.module("my-components").component("myTextarea",{templateUrl:"src/components/my-textarea/my-textarea.component.html",bindings:{error:"=",form:"<",label:"@",name:"@",model:"=",placeholder:"@",required:"<",row:"<"},controller:function(){return new(function(){function t(){_classCallCheck(this,t),this.$onInit=function(){}}return t}())}}),angular.module("my-components").component("titleBar",{templateUrl:"src/components/title-bar/title-bar.component.html",controller:function(t){return new(function(){function e(){_classCallCheck(this,e),this.title="",this.description="",this.path=[],this._event=null}return _createClass(e,[{key:"$onInit",value:function(){var e=this;this._event=t.scope.$on("dataChange",function(t,s){e.title=s.title,e.description=s.description,e.path=s.path})}},{key:"$onDestroy",value:function(){}}]),e}())}}),angular.module("my-components").component("leftPanelLink",{templateUrl:"src/components/left-panel/left-panel-link/left-panel-link.component.html",bindings:{icon:"@",state:"@",text:"@"},controller:function(){return new(function(){function t(){_classCallCheck(this,t),this.$onInit=function(){}}return t}())}}),angular.module("logged").component("changePasswordPage",{templateUrl:"src/pages/logged/change-password/change-password.page.html",controller:function(t,e,s,n,o,i){return new(function(){function s(){_classCallCheck(this,s)}return _createClass(s,[{key:"$onInit",value:function(){o.isLogged()||i.go("users.home"),this.model={user:o.storage.user,pass:"",new_pass:""},this.errors={}}},{key:"change_password",value:function(){var s=this;n.change_password(this.model).then(function(n){n&&(400==n.status?s.errors=n.errors:(s.errors={},e.info("Message","The password was changed successfully"),t.history.back()))})}},{key:"back",value:function(){t.history.back()}}]),s}())}}),angular.module("logged").component("homePage",{templateUrl:"src/pages/logged/home/home.page.html",controller:function(t,e,s){return new(function(){function t(){_classCallCheck(this,t),this.rios="windows"}return _createClass(t,[{key:"$onInit",value:function(){s.setData({title:"Home",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"}]})}}]),t}())}}),angular.module("not_logged").component("notFoundPage",{templateUrl:"src/pages/not_logged/not_found/not_found.page.html",controller:function(t){}}),angular.module("not_logged").component("loginPage",{templateUrl:"src/pages/not_logged/login/login.page.html",controller:function(t,e,s,n,o){var i=this;this.$onInit=function(){n.isLogged()&&o.go("users.home"),i.model={user:"",pass:""},i.errors={}},this.login=function(){s.login(i.model.user,i.model.pass).then(function(e){e&&(400==e.status?i.errors=e.errors:(i.errors={},n.setStorage({access_token:e.data.access_token,user_id:e.data.user_id,rol:e.data.rol,user:e.data.user}),t.info("Bienvenido",e.data.user),o.go("users.home")))})}}}),angular.module("logged").component("companiesDetailsPage",{templateUrl:"src/pages/logged/companies/details/companies-details.page.html",controller:function(t,e,s,n,o,i,a){return new(function(){function s(){_classCallCheck(this,s),this.company={},this.loading=!0}return _createClass(s,[{key:"$onInit",value:function(){var s=this,i={title:"Companies",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.companies",text:"Companies"}]};o.get(e.id).then(function(e){e&&(200==e.status?(s.company=e.data,i.path.push({state:"users.companiesDetails",text:"Details "+toTitleBar(s.company.name)}),n.setData(i),s.loading=!1):t.go("not_found"))})}}]),s}())}}),angular.module("logged").component("companiesFormPage",{templateUrl:"src/pages/logged/companies/form/companies-form.page.html",controller:function(t,e,s,n,o,i,a,r,c,l,u,d,h){return new(function(){function s(){_classCallCheck(this,s),this.company={},this.errors={},this.action="",this.loading=!0,this.submitting=!1,this.ok=!1}return _createClass(s,[{key:"$onInit",value:function(){var s=this,u=[];u[u.push(i.list())-1].then(function(t){t&&200==t.status&&(s.cities=t.data.map(function(t){return{id:t.id,text:t.name+", "+t.country}}))}),u[u.push(c.list())-1].then(function(t){t&&200==t.status&&(s.dance_styles=t.data.map(function(t){return{id:t.id,text:t.name}}))}),u[u.push(a.list())-1].then(function(t){t&&200==t.status&&(s.schools=t.data.map(function(t){return{id:t.id,text:t.name}}))}),u[u.push(l.list())-1].then(function(t){t&&200==t.status&&(s.persons=t.data.map(function(t){return{id:t.id,text:t.first_name+t.last_name}}))}),u[u.push(r.list())-1].then(function(t){t&&200==t.status&&(s.works=t.data.map(function(t){return{id:t.id,text:t.name}}))}),console.log("asd");var d={title:"Companies",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.companies",text:"Companies"}]};void 0!=e.id?(this.action="Edit",u[u.push(o.get(e.id))-1].then(function(e){e&&(200==e.status?(e.data._dance_styles=e.data._dance_styles.map(function(t){return t.id}),e.data._persons=e.data._persons.map(function(t){return t.id}),e.data._works=e.data._works.map(function(t){return t.id}),e.data._schools=e.data._schools.map(function(t){return t.id}),e.data._city=e.data._city.id,s.company=e.data,s.company._websites=s.company._websites.map(function(t){return t.url}),d.path.push({state:"users.companiesEdit",text:"Edit "+toTitleBar(s.company.name)}),n.setData(d)):t.go("not_found"))})):(this.action="Add",d.path.push({state:"users.companiesAdd",text:"Add"}),n.setData(d)),h.all([u]).then(function(){s.loading=!1})}},{key:"submit",value:function(){var s=this;this.submitting=!0,"Edit"==this.action?o.edit(e.id,this.company).then(function(e){e&&(200==e.status?(u.success("Message","The person was edited successfully"),s.ok=!0,t.go("users.companies")):u.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)}):o.add(this.company).then(function(e){e&&(200==e.status?(s.ok=!0,u.success("Message","The person was added successfully"),t.go("users.companies")):u.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)})}}]),s}())}}),angular.module("logged").component("companiesListPage",{templateUrl:"src/pages/logged/companies/list/companies-list.page.html",controller:function(t,e,s,n,o){return new(function(){function t(){_classCallCheck(this,t),this.companies=[],this.loading=!0}return _createClass(t,[{key:"$onInit",value:function(){var t=this;s.setData({title:"Companies",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.companies",text:"Companies"}]}),n.list().then(function(e){e&&(t.companies=e.data,t.loading=!1)})}},{key:"delete",value:function(t){var e=this;n.remove(this.companies[t].id).then(function(s){s?(e.companies.splice(t,1),o.success("Message","The company was removes successfully")):o.erorr("Message","Otros datos están relacionados a esta compañía")})}}]),t}())}}),angular.module("logged").component("countriesDetailsPage",{templateUrl:"src/pages/logged/countries/details/countries-details.page.html",controller:function(t,e,s,n,o){return new(function(){function e(){_classCallCheck(this,e),this.country={},this.action="",this.loading=!0}return _createClass(e,[{key:"$onInit",value:function(){var e=this;o.get(t.id).then(function(t){t&&(e.country=t.data,n.setData({title:"Countries",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.countries",text:"Countries"},{state:"users.countriesDetails",text:e.country.name}]}),e.loading=!1)})}}]),e}())}}),angular.module("logged").component("countriesFormPage",{templateUrl:"src/pages/logged/countries/form/countries-form.page.html",controller:function(t,e,s,n,o,i){return new(function(){function s(){_classCallCheck(this,s),this.country={},this.errors={},this.action="",this.loading=!1,this.submitting=!1,this.ok=!1}return _createClass(s,[{key:"$onInit",value:function(){var t=this,s={title:"Countries",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.countries",text:"Countries"}]};void 0!=e.id?(this.action="Edit",this.loading=!0,o.get(e.id).then(function(e){e&&(t.country=e.data,s.path.push({state:"users.countriesEdit",text:"Edit "+toTitleBar(t.country.name)}),n.setData(s),t.loading=!1)})):(this.action="Add",s.path.push({state:"users.countriesAdd",text:"Add"}),n.setData(s))}},{key:"submit",value:function(){var s=this;this.submitting=!0,"Edit"==this.action?o.edit(e.id,this.country).then(function(e){e&&(200==e.status?(s.ok=!0,i.success("Message","The country was successfully edited"),t.go("users.countries")):i.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)}):o.add(this.country).then(function(e){e&&(200==e.status?(s.ok=!0,i.success("Message","The country was successfully added"),t.go("users.countries")):i.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)})}}]),s}())}}),angular.module("logged").component("countriesListPage",{templateUrl:"src/pages/logged/countries/list/countries-list.page.html",controller:function(t,e,s,n,o){return new(function(){function t(){_classCallCheck(this,t),this.countries=[],this.loading=!0}return _createClass(t,[{key:"$onInit",value:function(){var t=this;s.setData({title:"Countries",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.countries",text:"Countries"}]}),n.list().then(function(e){e&&(t.countries=e.data,t.loading=!1)})}},{key:"delete",value:function(t){var e=this;n.remove(this.countries[t].id).then(function(s){s?(e.countries.splice(t,1),o.success("Message","The country was successfully removed")):o.erorr("Message","Other data depends from this country")})}}]),t}())}}),angular.module("logged").component("dancestylesDetailsPage",{templateUrl:"src/pages/logged/dancestyles/details/dancestyles-details.page.html",controller:function(t,e,s,n,o){return new(function(){function e(){_classCallCheck(this,e),this.dancestyle={},this.action="",
this.loading=!0}return _createClass(e,[{key:"$onInit",value:function(){var e=this;o.get(t.id).then(function(t){t&&(e.dancestyle=t.data,n.setData({title:"Dance styles",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.dancestyles",text:"Dance styles"},{state:"users.dancestylesDetails",text:e.dancestyle.name}]}),e.loading=!1)})}}]),e}())}}),angular.module("logged").component("dancestylesFormPage",{templateUrl:"src/pages/logged/dancestyles/form/dancestyles-form.page.html",controller:function(t,e,s,n,o,i){return new(function(){function s(){_classCallCheck(this,s),this.dancestyle={},this.errors={},this.action="",this.loading=!1,this.submitting=!1,this.ok=!1}return _createClass(s,[{key:"$onInit",value:function(){var t=this,s={dancestyle:"Dance styles",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.dancestyles",text:"Dance styles"}]};void 0!=e.id?(this.action="Edit",this.loading=!0,o.get(e.id).then(function(e){e&&(t.dancestyle=e.data,s.path.push({state:"users.dancestylesEdit",text:"Edit "+toTitleBar(t.dancestyle.name)}),n.setData(s),t.loading=!1)})):(this.action="Add",s.path.push({state:"users.dancestylesAdd",text:"Add"}),n.setData(s))}},{key:"submit",value:function(){var s=this;this.submitting=!0,"Edit"==this.action?o.edit(e.id,this.dancestyle).then(function(e){e&&(200==e.status?(s.ok=!0,i.success("Message","The dance style was successfully edited"),t.go("users.dancestyles")):i.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)}):o.add(this.dancestyle).then(function(e){e&&(200==e.status?(s.ok=!0,i.success("Message","The dance style was successfully added"),t.go("users.dancestyles")):i.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)})}}]),s}())}}),angular.module("logged").component("dancestylesListPage",{templateUrl:"src/pages/logged/dancestyles/list/dancestyles-list.page.html",controller:function(t,e,s,n,o){return new(function(){function t(){_classCallCheck(this,t),this.dancestyles=[],this.loading=!0}return _createClass(t,[{key:"$onInit",value:function(){var t=this;s.setData({title:"Dance styles",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.dancestyles",text:"Dance styles"}]}),n.list().then(function(e){e&&(t.dancestyles=e.data,t.loading=!1)})}},{key:"delete",value:function(t){var e=this;n.remove(this.dancestyles[t].id).then(function(s){s?(e.dancestyles.splice(t,1),o.success("Message","The dance style was successfully removed")):o.erorr("Message","Other data depends from this dance style")})}}]),t}())}}),angular.module("logged").component("personsDetailsPage",{templateUrl:"src/pages/logged/persons/details/persons-details.page.html",controller:function(t,e,s,n,o,i,a){return new(function(){function s(){_classCallCheck(this,s),this.person={},this.loading=!0}return _createClass(s,[{key:"$onInit",value:function(){var s=this,i={title:"Persons",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.persons",text:"Persons"}]};o.get(e.id).then(function(e){e&&(200==e.status?(s.person=e.data,i.path.push({state:"users.personsDetails",text:"Details "+toTitleBar(s.person.first_name)}),n.setData(i),s.loading=!1):t.go("not_found"))})}}]),s}())}}),angular.module("logged").component("personsFormPage",{templateUrl:"src/pages/logged/persons/form/persons-form.page.html",controller:function(t,e,s,n,o,i,a,r,c,l,u){return new(function(){function s(){_classCallCheck(this,s),this.person={},this.errors={},this.action="",this.loading=!1,this.submitting=!1,this.ok=!1}return _createClass(s,[{key:"$onInit",value:function(){var s=this;c.list().then(function(t){t&&200==t.status&&(s.venues=t.data.map(function(t){return{id:t.id,text:t.name}}))}),a.list().then(function(t){t&&200==t.status&&(s.titles=t.data.map(function(t){return{id:t.id,text:t.name}}))}),r.list().then(function(t){t&&200==t.status&&(s.dance_styles=t.data.map(function(t){return{id:t.id,text:t.name}}))});var l={title:"Persons",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.persons",text:"Persons"}]};void 0!=e.id?(this.action="Edit",this.loading=!0,o.get(e.id).then(function(e){e&&(200==e.status?(i.list().then(function(t){t&&200==t.status&&(s.cities=t.data.map(function(t){return{id:t.id,text:t.name+", "+t.country}}))}),e.data._titles=e.data._titles.map(function(t){return t.id}),e.data._dance_styles=e.data._dance_styles.map(function(t){return t.id}),e.data._venues=e.data._venues.map(function(t){return t.id}),e.data._city=e.data._city.id,s.person=e.data,s.person._websites=s.person._websites.map(function(t){return t.url}),l.path.push({state:"users.personsEdit",text:"Edit "+toTitleBar(s.person.first_name)}),n.setData(l),s.loading=!1):t.go("not_found"))})):(this.action="Add",l.path.push({state:"users.personsAdd",text:"Add"}),n.setData(l))}},{key:"submit",value:function(){var s=this;this.submitting=!0,"Edit"==this.action?o.edit(e.id,this.person).then(function(e){e&&(200==e.status?(l.success("Message","The person was successfully edited"),s.ok=!0,t.go("users.persons")):l.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)}):o.add(this.person).then(function(e){e&&(200==e.status?(s.ok=!0,l.success("Message","The person was successfully added"),t.go("users.persons")):l.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)})}}]),s}())}}),angular.module("logged").component("personsListPage",{templateUrl:"src/pages/logged/persons/list/persons-list.page.html",controller:function(t,e,s,n,o){return new(function(){function t(){_classCallCheck(this,t),this.persons=[],this.loading=!0}return _createClass(t,[{key:"$onInit",value:function(){var t=this;s.setData({title:"Persons",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.persons",text:"Persons"}]}),n.list().then(function(e){e&&(t.persons=e.data,t.loading=!1)})}},{key:"delete",value:function(t){var e=this;n.remove(this.persons[t].id).then(function(s){s?(e.persons.splice(t,1),o.success("Message","La persona se eliminó correctamente")):o.erorr("Message","Otros datos están relacionado a esta persona")})}}]),t}())}}),angular.module("logged").component("schoolsDetailsPage",{templateUrl:"src/pages/logged/schools/details/schools-details.page.html",controller:function(t,e,s,n,o,i,a){return new(function(){function s(){_classCallCheck(this,s),this.school={},this.loading=!0}return _createClass(s,[{key:"$onInit",value:function(){var s=this,i={title:"Schools",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.schools",text:"Schools"}]};o.get(e.id).then(function(e){e&&(200==e.status?(s.school=e.data,i.path.push({state:"users.schoolsDetails",text:"Details "+toTitleBar(s.school.name)}),n.setData(i),s.loading=!1):t.go("not_found"))})}}]),s}())}}),angular.module("logged").component("schoolsFormPage",{templateUrl:"src/pages/logged/schools/form/schools-form.page.html",controller:function(t,e,s,n,o,i,a,r,c,l,u){return new(function(){function s(){_classCallCheck(this,s),this.school={},this.errors={},this.action="",this.loading=!0,this.submitting=!1,this.ok=!1}return _createClass(s,[{key:"$onInit",value:function(){var s=this,c=[];c[c.push(i.list())-1].then(function(t){t&&200==t.status&&(s.cities=t.data.map(function(t){return{id:t.id,text:t.name+", "+t.country}}))}),c[c.push(r.list())-1].then(function(t){t&&200==t.status&&(s.persons=t.data.map(function(t){return{id:t.id,text:t.first_name+" "+t.last_name}}))}),c[c.push(a.list())-1].then(function(t){t&&200==t.status&&(s.dance_styles=t.data.map(function(t){return{id:t.id,text:t.name}}))});var l={title:"Schools",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.schools",text:"Schools"}]};void 0!=e.id?(this.action="Edit",c[c.push(o.get(e.id))-1].then(function(e){e&&(200==e.status?(e.data._dance_styles=e.data._dance_styles.map(function(t){return t.id}),e.data._persons=e.data._persons.map(function(t){return t.id}),e.data._city=e.data._city.id,e.data._websites=e.data._websites.map(function(t){return t.url}),s.school=e.data,l.path.push({state:"users.schoolsEdit",text:"Edit "+toTitleBar(s.school.name)}),n.setData(l)):t.go("not_found"))})):(this.action="Add",l.path.push({state:"users.schoolsAdd",text:"Add"}),n.setData(l)),u.all(c).then(function(){s.loading=!1})}},{key:"submit",value:function(){var s=this;this.submitting=!0,"Edit"==this.action?o.edit(e.id,this.school).then(function(e){e&&(200==e.status?(c.success("Message","The school was successfully edited"),s.ok=!0,t.go("users.schools")):c.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)}):o.add(this.school).then(function(e){e&&(200==e.status?(s.ok=!0,c.success("Message","The school was successfully added"),t.go("users.schools")):c.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)})}}]),s}())}}),angular.module("logged").component("schoolsListPage",{templateUrl:"src/pages/logged/schools/list/schools-list.page.html",controller:function(t,e,s,n,o){return new(function(){function t(){_classCallCheck(this,t),this.schools=[],this.loading=!0}return _createClass(t,[{key:"$onInit",value:function(){var t=this;s.setData({title:"Schools",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.schools",text:"Schools"}]}),n.list().then(function(e){e&&(t.schools=e.data,t.loading=!1)})}},{key:"delete",value:function(t){var e=this;n.remove(this.schools[t].id).then(function(s){s?(e.schools.splice(t,1),o.success("Message","The school was successfully removed")):o.erorr("Message","Other data depends from this school")})}}]),t}())}}),angular.module("logged").component("titlesDetailsPage",{templateUrl:"src/pages/logged/titles/details/titles-details.page.html",controller:function(t,e,s,n,o){return new(function(){function e(){_classCallCheck(this,e),this.title={},this.action="",this.loading=!0}return _createClass(e,[{key:"$onInit",value:function(){var e=this;o.get(t.id).then(function(t){t&&(e.title=t.data,n.setData({title:"Titles",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.titles",text:"Titles"},{state:"users.titlesDetails",text:e.title.name}]}),e.loading=!1)})}}]),e}())}}),angular.module("logged").component("titlesFormPage",{templateUrl:"src/pages/logged/titles/form/titles-form.page.html",controller:function(t,e,s,n,o,i){return new(function(){function s(){_classCallCheck(this,s),this.title={},this.errors={},this.action="",this.loading=!1,this.submitting=!1,this.ok=!1}return _createClass(s,[{key:"$onInit",value:function(){var t=this,s={title:"Titles",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.titles",text:"Titles"}]};void 0!=e.id?(this.action="Edit",this.loading=!0,o.get(e.id).then(function(e){e&&(t.title=e.data,s.path.push({state:"users.titlesEdit",text:"Edit "+toTitleBar(t.title.name)}),n.setData(s),t.loading=!1)})):(this.action="Add",s.path.push({state:"users.titlesAdd",text:"Add"}),n.setData(s))}},{key:"submit",value:function(){var s=this;this.submitting=!0,"Edit"==this.action?o.edit(e.id,this.title).then(function(e){e&&(200==e.status?(s.ok=!0,i.success("Message","The title was successfully edited"),t.go("users.titles")):i.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)}):o.add(this.title).then(function(e){e&&(200==e.status?(s.ok=!0,i.success("Message","The title was successfully added"),t.go("users.titles")):i.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)})}}]),s}())}}),angular.module("logged").component("titlesListPage",{templateUrl:"src/pages/logged/titles/list/titles-list.page.html",controller:function(t,e,s,n,o){return new(function(){function t(){_classCallCheck(this,t),this.titles=[],this.loading=!0}return _createClass(t,[{key:"$onInit",value:function(){var t=this;s.setData({title:"Titles",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.titles",text:"Titles"}]}),n.list().then(function(e){e&&(t.titles=e.data,t.loading=!1)})}},{key:"delete",value:function(t){var e=this;n.remove(this.titles[t].id).then(function(s){s?(e.titles.splice(t,1),o.success("Message","The title was successfully removed")):o.erorr("Message","Other data depends from this title")})}}]),t}())}}),angular.module("logged").component("venuesDetailsPage",{templateUrl:"src/pages/logged/venues/details/venues-details.page.html",controller:function(t,e,s,n,o,i,a){return new(function(){function s(){_classCallCheck(this,s),this.venue={},this.loading=!0}return _createClass(s,[{key:"$onInit",value:function(){var s=this,i={title:"Venues",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.venues",text:"Venues"}]};o.get(e.id).then(function(e){e&&(200==e.status?(s.venue=e.data,i.path.push({state:"users.venuesDetails",text:"Details "+toTitleBar(s.venue.name)}),n.setData(i),s.loading=!1):t.go("not_found"))})}}]),s}())}}),angular.module("logged").component("venuesFormPage",{templateUrl:"src/pages/logged/venues/form/venues-form.page.html",controller:function(t,e,s,n,o,i,a,r,c,l,u){return new(function(){function s(){_classCallCheck(this,s),this.venue={},this.errors={},this.action="",this.loading=!0,this.submitting=!1,this.ok=!1}return _createClass(s,[{key:"$onInit",value:function(){var s=this,a=[];a[a.push(i.list())-1].then(function(t){t&&200==t.status&&(s.cities=t.data.map(function(t){return{id:t.id,text:t.name+", "+t.country}}))});var r={title:"Venues",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.venues",text:"Venues"}]};void 0!=e.id?(this.action="Edit",a[a.push(o.get(e.id))-1].then(function(e){e&&(200==e.status?(e.data._city=e.data._city.id,s.venue=e.data,s.venue._websites=s.venue._websites.map(function(t){return t.url}),r.path.push({state:"users.venuesEdit",text:"Edit "+toTitleBar(s.venue.name)}),n.setData(r)):t.go("not_found"))})):(this.action="Add",r.path.push({state:"users.venuesAdd",text:"Add"}),n.setData(r)),u.all(a).then(function(){s.loading=!1})}},{key:"submit",value:function(){var s=this;this.submitting=!0,"Edit"==this.action?o.edit(e.id,this.venue).then(function(e){e&&(200==e.status?(c.success("Message","The venue was successfully edited"),s.ok=!0,t.go("users.venues")):c.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)}):o.add(this.venue).then(function(e){e&&(200==e.status?(s.ok=!0,c.success("Message","The venue was successfully added"),t.go("users.venues")):c.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)})}}]),s}())}}),angular.module("logged").component("venuesListPage",{templateUrl:"src/pages/logged/venues/list/venues-list.page.html",controller:function(t,e,s,n,o){return new(function(){function t(){_classCallCheck(this,t),this.venues=[],this.loading=!0}return _createClass(t,[{key:"$onInit",value:function(){var t=this;s.setData({title:"Venues",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.venues",text:"Venues"}]}),n.list().then(function(e){e&&(t.venues=e.data,t.loading=!1)})}},{key:"delete",value:function(t){var e=this;n.remove(this.venues[t].id).then(function(s){s?(e.venues.splice(t,1),o.success("Message","The venue was successfully removed")):o.erorr("Message","Other data depends from this venue")})}}]),t}())}}),angular.module("logged").component("worksDetailsPage",{templateUrl:"src/pages/logged/works/details/works-details.page.html",controller:function(t,e,s,n,o,i,a){return new(function(){function s(){_classCallCheck(this,s),this.work={},this.loading=!0}return _createClass(s,[{key:"$onInit",value:function(){var s=this,i={title:"Works",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.works",text:"Works"}]};o.get(e.id).then(function(e){e&&(200==e.status?(s.work=e.data,i.path.push({state:"users.worksDetails",text:"Details "+toTitleBar(s.work.name)}),n.setData(i),s.loading=!1):t.go("not_found"))})}}]),s}())}}),angular.module("logged").component("worksFormPage",{templateUrl:"src/pages/logged/works/form/works-form.page.html",controller:function(t,e,s,n,o,i,a,r,c,l,u){return new(function(){function s(){_classCallCheck(this,s),this.work={},this.errors={},this.action="",this.loading=!1,this.submitting=!1,this.ok=!1}return _createClass(s,[{key:"$onInit",value:function(){var s=this,l=[];l[l.push(r.list())-1].then(function(t){t&&200==t.status&&(s.venues=t.data.map(function(t){return{id:t.id,text:t.name}}))}),l[l.push(a.list())-1].then(function(t){t&&200==t.status&&(s.companies=t.data.map(function(t){return{id:t.id,text:t.name}}))}),l[l.push(c.list())-1].then(function(t){t&&200==t.status&&(s.persons=t.data.map(function(t){return{id:t.id,text:t.first_name+t.last_name}}))}),l[l.push(i.list())-1].then(function(t){t&&200==t.status&&(s.dance_styles=t.data.map(function(t){return{id:t.id,text:t.name}}))});var u={title:"Works",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.works",text:"Works"}]};void 0!=e.id?(this.action="Edit",l[l.push(o.get(e.id))-1].then(function(e){e&&(200==e.status?(e.data._dance_styles=e.data._dance_styles.map(function(t){return t.id}),e.data._persons=e.data._persons.map(function(t){return t.id}),e.data._premiere_company=e.data._premiere_company.id,e.data._premiere_venue=e.data._premiere_venue.id,s.work=e.data,u.path.push({state:"users.worksEdit",text:"Edit "+toTitleBar(s.work.name)}),n.setData(u)):t.go("not_found"))})):(this.action="Add",u.path.push({state:"users.worksAdd",text:"Add"}),n.setData(u)),$q.all(l).then(function(){s.loading=!1})}},{key:"submit",value:function(){var s=this;this.submitting=!0,"Edit"==this.action?o.edit(e.id,this.work).then(function(e){e&&(200==e.status?(l.success("Message","The work was successfully edited"),s.ok=!0,t.go("users.works")):l.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)}):o.add(this.work).then(function(e){e&&(200==e.status?(s.ok=!0,l.success("Message","The work was successfully added"),t.go("users.works")):l.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)})}}]),s}())}}),angular.module("logged").component("worksListPage",{templateUrl:"src/pages/logged/works/list/works-list.page.html",controller:function(t,e,s,n,o){return new(function(){function t(){_classCallCheck(this,t),this.works=[],this.loading=!0}return _createClass(t,[{key:"$onInit",value:function(){var t=this;s.setData({title:"Works",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.works",text:"Works"}]}),n.list().then(function(e){e&&(t.works=e.data,t.loading=!1)})}},{key:"delete",value:function(t){var e=this;n.remove(this.works[t].id).then(function(s){s?(e.works.splice(t,1),o.success("Message","The work was successfully removed")):o.erorr("Message","Other data depends from this work")})}}]),t}())}}),angular.module("logged").component("citiesDetailsPage",{templateUrl:"src/pages/logged/countries/cities/details/cities-details.page.html",controller:function(t,e,s,n,o,i){return new(function(){function e(){_classCallCheck(this,e),this.loading=!0,this.city={}}return _createClass(e,[{key:"$onInit",value:function(){var e=this;i.get(t.country_id).then(function(s){s&&(e.country=s.data,o.get(t.id).then(function(t){t&&(e.city=t.data,e.loading=!1,n.setData({title:"Cities",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.countries",text:"Countries"},{state:"",text:toTitleBar(e.country.name)},{state:"users.cities({country_id: "+e.country.id+"})",text:"Cities"},{state:"users.citiesDetails",text:toTitleBar(e.city.name)}]}))}))})}}]),e}())}}),angular.module("logged").component("citiesFormPage",{templateUrl:"src/pages/logged/countries/cities/form/cities-form.page.html",controller:function(t,e,s,n,o,i,a){return new(function(){function s(){_classCallCheck(this,s),this.city={},this.errors={},this.action="",this.loading=!1,this.submitting=!1,this.ok=!1}return _createClass(s,[{key:"$onInit",value:function(){var t=this;o.get(e.country_id).then(function(s){s&&(t.country=s.data,t.city._country=t.country.id,n.setData({title:"Cities",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.countries",text:"Countries"},{state:"",text:toTitleBar(t.country.name)},{state:"users.cities({country_id: "+t.country.id+"})",text:"Cities"}]}),void 0!=e.id?(t.action="Edit",t.loading=!0,i.get(e.id,"?country_id="+t.country.id).then(function(e){e&&200==e.status&&(t.city=e.data,t.city._country=t.country.id,t.loading=!1,n.addPath({state:"users.citiesEdit",text:"Edit "+toTitleBar(t.city.name)}))})):(t.action="Add",n.addPath({state:"users.citiesAdd",text:"Add "})))})}},{key:"submit",value:function(){var s=this;this.submitting=!0,"Edit"==this.action?i.edit(e.id,this.city).then(function(e){e&&(200==e.status?(s.ok=!0,a.success("Message","The city was successfully edited"),t.go("users.cities",{country_id:s.country.id})):a.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)}):i.add(this.city).then(function(e){e&&(200==e.status?(s.ok=!0,a.success("Message","The city was addes successfully"),t.go("users.cities",{country_id:s.country.id})):a.error("Message","Exist some errors in data"),s.errors=e.errors,s.submitting=!1)})}}]),s}())}}),angular.module("logged").component("citiesListPage",{templateUrl:"src/pages/logged/countries/cities/list/cities-list.page.html",controller:function(t,e,s,n,o,i,a){return new(function(){function s(){_classCallCheck(this,s),this.cities=[],this.loading=!0,this.country={}}return _createClass(s,[{key:"$onInit",value:function(){var s=this;console.log(t),i.get(e.country_id).then(function(t){t&&(s.country=t.data,n.setData({title:"Cities",description:"a description",path:[{state:"users.home",text:"Home",icon:!0,icon_class:"fa-home"},{state:"users.countries",text:"Countries"},{state:"",text:toTitleBar(s.country.name)},{state:"users.cities",text:"Cities"}]}),o.list("?country_id="+s.country.id).then(function(t){t&&(s.cities=t.data,s.loading=!1)}))})}},{key:"delete",value:function(t){var e=this;o.remove(this.cities[t].id).then(function(s){s?(e.cities.splice(t,1),a.success("Message","The city was removed successfully")):a.erorr("Message","Other data depends from this city")})}}]),s}())}});